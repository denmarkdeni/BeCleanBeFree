{% extends 'base.html' %}
{% block content %}

<!-- [ Main Content ] start -->
<div class="pc-container">
    <div class="pc-content">
      <!-- [ breadcrumb ] start -->
      <div class="page-header">
        <div class="page-block">
          <div class="page-header-title">
            <h5 class="mb-0 font-medium">Admin</h5>
          </div>
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="../dashboard/index.html">Home</a></li>
            <li class="breadcrumb-item"><a href="javascript: void(0)">Dashboard</a></li>
            <li class="breadcrumb-item" aria-current="page">Admin</li>
          </ul>
        </div>
      </div>
      <!-- [ breadcrumb ] end -->

      <!-- [ Main Content ] start -->
      <div class="grid grid-cols-12 gap-x-6">
        <div class="col-span-12 xl:col-span-4 md:col-span-6">
          <div class="card">
            <div class="card-header !pb-0 !border-b-0">
              <h5>Total Reports</h5>
            </div>
            <div class="card-body">
              <div class="flex items-center justify-between gap-3 flex-wrap">
                <h3 class="font-light flex items-center mb-0">
                  <i class="feather icon-layers text-blue-500 text-[30px] mr-1.5"></i>
                  {{ total_reports }}
                </h3>
                <!-- <p class="mb-0">67%</p> -->
              </div>
              <!-- <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mt-6 dark:bg-themedark-bodybg"> -->
                <!-- <div class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" -->
                  <!-- style="width: 75%"></div> -->
              <!-- </div> -->
            </div>
          </div>
        </div>
        <div class="col-span-12 xl:col-span-4 md:col-span-6">
          <div class="card">
            <div class="card-header !pb-0 !border-b-0">
              <h5>Total Posts</h5>
            </div>
            <div class="card-body">
              <div class="flex items-center justify-between gap-3 flex-wrap">
                <h3 class="font-light flex items-center mb-0">
                  <i class="feather icon-clock text-success-500 text-[30px] mr-1.5"></i>
                  {{ total_posts }}
                </h3>
                <!-- <p class="mb-0">36%</p> -->
              <!-- </div> -->
              <!-- <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mt-6 dark:bg-themedark-bodybg">
                <div class="bg-theme-bg-2 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar"
                  style="width: 35%"></div> -->
              </div>
            </div>
          </div>
        </div>
        <div class="col-span-12 xl:col-span-4">
          <div class="card">
            <div class="card-header !pb-0 !border-b-0">
              Total Users
            </div>
            <div class="card-body">
              <div class="flex items-center justify-between gap-3 flex-wrap">
                <h3 class="font-light flex items-center mb-0">
                  <i class="feather icon-users text-danger-500 text-[30px] mr-1.5"></i>
                  {{ total_users }}
                </h3>
                <!-- <p class="mb-0">80%</p> -->
              <!-- </div>
              <!-- <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mt-6 dark:bg-themedark-bodybg">
                <div class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar"
                  style="width: 80%"></div> -->
              </div> 
            </div>
          </div>
        </div>
        <div class="col-span-12 xl:col-span-4">
          <div class="card card-social">
            {% comment %} <div class="card-body border-b border-theme-border dark:border-themedark-border">
              <div class="flex items-center justify-center">
                <div class="shrink-0">
                  <!-- <i class="fab fa-facebook-f text-primary-500 text-[36px]"></i> -->
                   <h3>Reports</h3>
                   <h3>Insight</h3>
                </div>
                <div class="grow ltr:text-right rtl:text-left">
                  <!-- <h3 class="mb-2">20</h3> -->
                  <h3 class="text-success-500 mb-0">187</h3>
                    <h5><span class="text-muted">Total Reports</span></h5>
                </div>
              </div>
            </div> {% endcomment %}
            <div class="card-body">
              <div class="grid grid-cols-12 gap-x-6">
                <div class="col-span-6">
                  <h6 class="text-center mb-2.5"><span class="text-muted m-r-5">Resolved Reports :</span> {{ resolved_reports }}</h6>
                  <div class="w-full bg-theme-bodybg rounded-lg h-1.5 dark:bg-themedark-bodybg">
                    <div class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" style="width: 100%"></div>
                  </div>
                </div>
                <div class="col-span-6">
                  <h6 class="text-center mb-2.5"><span class="text-muted m-r-5">Pending Reports :</span> {{ rejected_reports }}</h6>
                  <div class="w-full bg-theme-bodybg rounded-lg h-1.5 dark:bg-themedark-bodybg">
                    <div class="bg-theme-bg-2 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" style="width: 100%"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-span-12 xl:col-span-4 md:col-span-6">
          <div class="card card-social">
            {% comment %} <div class="card-body border-b border-theme-border dark:border-themedark-border">
              <div class="flex items-center justify-center">
                <div class="shrink-0">
                  <!-- <i class="fab fa-twitter text-primary-500 text-[36px]"></i> -->
                   <h3>Posts</h3> 
                    <h3>Insight</h3>
                </div>
                <div class="grow ltr:text-right rtl:text-left">
                  <h3 class="text-green-500 mb-0">874</h3>
                  <h5 class="text-green-500 mb-0"><span class="text-muted">Total Users</span></h5>
                </div>
              </div>
            </div> {% endcomment %}
            <div class="card-body">
              <div class="grid grid-cols-12 gap-x-6">
                <div class="col-span-6">
                  <h6 class="text-center mb-2.5"><span class="text-muted m-r-5">Pending Posts : </span> {{ pending_posts }}</h6>
                  <div class="w-full bg-theme-bodybg rounded-lg h-1.5 dark:bg-themedark-bodybg">
                    <div class="bg-success-500 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" style="width: 100%"></div>
                  </div>
                </div>
                <div class="col-span-6">
                  <h6 class="text-center mb-2.5"><span class="text-muted m-r-5">Approved Posts : </span> {{ approved_posts }}</h6>
                  <div class="w-full bg-theme-bodybg rounded-lg h-1.5 dark:bg-themedark-bodybg">
                    <div class="bg-primary-500 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" style="width: 100%"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-span-12 xl:col-span-4 md:col-span-6">
          <div class="card card-social">
            {% comment %} <div class="card-body border-b border-theme-border dark:border-themedark-border">
              <div class="flex items-center justify-center">
                <div class="shrink-0">
                  <!-- <i class="fab fa-twitter text-primary-500 text-[36px]"></i> -->
                   <h4>Users Insight</h4>
                </div>
                <div class="grow ltr:text-right rtl:text-left">
                  <h3 class="text-green-500 mb-0">12</h3>
                  <h5 class="text-green-500 mb-2"><span class="text-muted">Active Counsellors</span></h5>
                </div>
              </div>
            </div> {% endcomment %}
            <div class="card-body">
              <div class="grid grid-cols-12 gap-x-6">
                <div class="col-span-6">
                  <h6 class="text-center mb-2.5"><span class="text-muted m-r-5">Users :</span> {{ normal_users }}</h6>
                  <div class="w-full bg-theme-bodybg rounded-lg h-1.5 dark:bg-themedark-bodybg">
                    <div class="bg-success-500 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" style="width: 108%"></div>
                  </div>
                </div>
                <div class="col-span-6">
                  <h6 class="text-center mb-2.5"><span class="text-muted m-r-5">Counsellors :</span> {{ counselors }}</h6>
                  <div class="w-full bg-theme-bodybg rounded-lg h-1.5 dark:bg-themedark-bodybg">
                    <div class="bg-primary-500 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]" role="progressbar" style="width: 100%"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="col-span-12 xl:col-span-4 md:col-span-6">
          <div class="card user-list">
            <div class="card-header">
              <h5>Rating</h5>
            </div>
            <div class="card-body">
              <div class="flex items-center justify-between gap-1 mb-5">
                <h2 class="font-light flex items-center m-0">
                  4.7
                  <i class="fas fa-star text-[10px] ml-2.5 text-warning-500"></i>
                </h2>
                <h6 class="flex items-center m-0">
                  0.4
                  <i class="fas fa-caret-up text-success text-[22px] ml-2.5"></i>
                </h6>
              </div>

              <div class="flex items-center justify-between gap-2 mb-2">
                <h6 class="flex items-center gap-1">
                  <i class="fas fa-star text-[10px] mr-2.5 text-warning-500"></i>
                  5
                </h6>
                <h6>384</h6>
              </div>
              <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mb-6 mt-3 dark:bg-themedark-bodybg">
                <div
                  class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]"
                  role="progressbar"
                  style="width: 70%"
                ></div>
              </div>

              <div class="flex items-center justify-between gap-2 mb-2">
                <h6 class="flex items-center gap-1">
                  <i class="fas fa-star text-[10px] mr-2.5 text-warning-500"></i>
                  4
                </h6>
                <h6>145</h6>
              </div>
              <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mb-6 mt-3 dark:bg-themedark-bodybg">
                <div
                  class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]"
                  role="progressbar"
                  style="width: 35%"
                ></div>
              </div>

              <div class="flex items-center justify-between gap-2 mb-2">
                <h6 class="flex items-center gap-1">
                  <i class="fas fa-star text-[10px] mr-2.5 text-warning-500"></i>
                  3
                </h6>
                <h6>24</h6>
              </div>
              <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mb-6 mt-3 dark:bg-themedark-bodybg">
                <div
                  class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]"
                  role="progressbar"
                  style="width: 25%"
                ></div>
              </div>

              <div class="flex items-center justify-between gap-2 mb-2">
                <h6 class="flex items-center gap-1">
                  <i class="fas fa-star text-[10px] mr-2.5 text-warning-500"></i>
                  2
                </h6>
                <h6>1</h6>
              </div>
              <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mb-6 mt-3 dark:bg-themedark-bodybg">
                <div
                  class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]"
                  role="progressbar"
                  style="width: 10%"
                ></div>
              </div>

              <div class="flex items-center justify-between gap-2 mb-2">
                <h6 class="flex items-center gap-1">
                  <i class="fas fa-star text-[10px] mr-2.5 text-warning-500"></i>
                  1
                </h6>
                <h6>0</h6>
              </div>
              <div class="w-full bg-theme-bodybg rounded-lg h-1.5 mt-4 dark:bg-themedark-bodybg">
                <div
                  class="bg-theme-bg-1 h-full rounded-lg shadow-[0_10px_20px_0_rgba(0,0,0,0.3)]"
                  role="progressbar"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </div>
        </div> -->
        
        <div class="col-span-12 xl:col-span-12 md:col-span-12">
          <div class="card table-card">
            <div class="card-header">
              <h5>Recent Reports</h5>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th>Title</th>
                      <th>Category</th>
                      <th>Reported By</th>
                      <th>Created At</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for report in reports %}
                    <tr class="unread">
                      <td>
                        <h6 class="mb-1">{{ report.title }}</h6>
                        <p class="m-0">{{ report.description|truncatewords:10 }}</p>
                      </td>
                      <td>
                        <p class="m-0">{{ report.get_category_display }}</p>
                      </td>
                      <td>
                        <p class="m-0">{{ report.user.username|default:"Anonymous" }}</p>
                      </td>
                      <td>
                        <h6 class="text-muted">
                          <i class="fas fa-circle {% if report.is_resolved %}text-success{% else %}text-danger{% endif %} text-[10px] ltr:mr-4 rtl:ml-4"></i>
                          {{ report.created_at|date:"d M Y H:i" }}
                        </h6>
                      </td>
                      <td>
                        <h6 class="text-muted">
                          {% if report.is_resolved %}Resolved{% else %}Pending{% endif %}
                        </h6>
                      </td>
                      <td>
                        <a href="{% url 'report_management' %}" class="badge bg-theme-bg-2 text-white text-[12px] mx-2">More</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="6">No reports found.</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

      </div>
      <!-- [ Main Content ] end -->
    </div>
  </div>

{% endblock %}

